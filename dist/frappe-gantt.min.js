!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("Gantt",[],n):"object"==typeof exports?exports.Gantt=n():t.Gantt=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,n,e){function r(){a(),J.change_view_mode=c,J.unselect_all=L,J.view_is=I,J.get_bar=z,J.trigger_event=F,J.refresh=d,c(J.config.view_mode)}function a(){var t={header_height:50,column_width:30,step:24,view_modes:["Quarter Day","Half Day","Day","Week","Month"],bar:{height:20},arrow:{curve:5},padding:18,view_mode:"Month",date_format:"YYYY-MM-DD",custom_popup_html:null,left_menu_width:0,inline:!0};J.config=Object.assign({},t,e),o()}function o(){J.element=t,J._tasks=[],n.forEach(function(t){return J._tasks=J._tasks.concat(t.tasks)}),J._projects=n,J._projects._rows=J._tasks.length,J._bars=[],J._arrows=[],J.element_groups={}}function d(t){o(t),c(J.config.view_mode)}function c(t){l(),A(t),_(),F("view_change",[t])}function l(){f(),g(),u(),p(),h()}function f(){J.tasks=J._tasks.map(function(t,n){if(t._start=moment(t.start,J.config.date_format),t._end=moment(t.end,J.config.date_format),t._index=n,t.start||t.end||(t._start=moment().startOf("day"),t._end=moment().startOf("day").add(2,"days")),!t.start&&t.end&&(t._start=t._end.clone().add(-2,"days")),t.start&&!t.end&&(t._end=t._start.clone().add(2,"days")),t.start&&t.end||(t.invalid=!0),"string"==typeof t.dependencies||!t.dependencies){var e=[];t.dependencies&&(e=t.dependencies.split(",").map(function(t){return t.trim()}).filter(function(t){return t})),t.dependencies=e}if(t.id||(t.id=q(t)),J.config.inline){var r=J._tasks[n-1],a=r&&t.projectId!==r.projectId;r?r._end<t._start&&!a?t._line=r._line:t._line=r._line+1:t._line=0}else t._line=t._index;return t})}function g(){var t=0;J._projects.forEach(function(n,e){var r=n.tasks;if(r.forEach(function(t,e){var a=r[e+1];0===e&&(n._firstRow=t._line),a||(n._lastRow=t._line,n._lastDate=C(n.tasks)),t.currentTask&&(n._currentDate=U(t))}),n._late=moment().diff(n._currentDate,"days"),n._late>0){var a=moment(n._lastDate,J.config.date_format).clone().add(1,"days"),o=moment(n._lastDate,J.config.date_format).clone().add(n._late,"days"),i={projectId:n.id,id:J.tasks.length+1,name:"Projeção de Término",_start:a,_end:o,_line:n._lastRow,custom_class:"late",dependencies:[],responsaveis:[],uors:[],periodos:[{dataInicio:a,dataFim:o,tipo:{nome:"Previsão"}}]};J.tasks.push(i)}n._rows=n._lastRow-n._firstRow+1,t+=n._rows}),J._projects._rows=t}function u(){J.dependency_map={};var t=!0,n=!1,e=void 0;try{for(var r,a=J.tasks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,i=!0,d=!1,s=void 0;try{for(var c,l=o.dependencies[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value;J.dependency_map[f]=J.dependency_map[f]||[],J.dependency_map[f].push(o.id)}}catch(g){d=!0,s=g}finally{try{!i&&l["return"]&&l["return"]()}finally{if(d)throw s}}}}catch(g){n=!0,e=g}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw e}}}function p(){J.gantt_start=J.gantt_end=null;var t=!0,n=!1,e=void 0;try{for(var r,a=J.tasks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;(!J.gantt_start||o._start<J.gantt_start)&&(J.gantt_start=o._start),(!J.gantt_end||o._end>J.gantt_end)&&(J.gantt_end=o._end)}}catch(i){n=!0,e=i}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw e}}m(),w()}function h(){J.canvas||(J.canvas=Snap(J.element).addClass("gantt"))}function _(){v(),y(),B(),Y(),X(),O(),D(),H(),b(),x(),R()}function v(){J.canvas.clear(),J._bars=[],J._arrows=[]}function m(){I(["Quarter Day","Half Day"])?(J.gantt_start=J.gantt_start.clone().subtract(7,"day"),J.gantt_end=J.gantt_end.clone().add(7,"day")):I("Month")?(J.gantt_start=J.gantt_start.clone().startOf("month").subtract(1,"Month"),J.gantt_end=J.gantt_end.clone().endOf("month")):(J.gantt_start=J.gantt_start.clone().subtract(3,"days"),J.gantt_end=J.gantt_end.clone().add(3,"days"))}function w(){J.dates=[];for(var t=null;null===t||t<J.gantt_end;)t=t?I("Month")?t.clone().add(1,"month"):t.clone().add(J.config.step,"hours"):J.gantt_start.clone(),J.dates.push(t)}function y(){var t=["grid","project","date","arrow","progress","bar","details"],n=!0,e=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var i=a.value;J.element_groups[i]=J.canvas.group().attr({id:i})}}catch(d){e=!0,r=d}finally{try{!n&&o["return"]&&o["return"]()}finally{if(e)throw r}}}function A(t){J.config.view_mode=t;var n=1832-J.config.left_menu_width,e=0;J.config.column_width=n/J.dates.length,"Day"===t?(e=18,J.config.step=24):"Half Day"===t?(e=38,J.config.step=12):"Quarter Day"===t?(e=38,J.config.step=6):"Week"===t?(e=140,J.config.step=168):"Month"===t&&(e=20,J.config.step=720),J.config.column_width=J.config.column_width<e?e:J.config.column_width}function b(){var t=J.canvas.node.getBoundingClientRect().width,n=parseFloat(J.canvas.select("#grid .grid-row").attr("width"))+J.config.left_menu_width;t<n&&J.canvas.attr("width",n)}function x(){var t=document.querySelector(J.element).parentElement;if(t){var n=k().diff(J.gantt_start,"hours")/J.config.step*J.config.column_width-J.config.column_width;t.scrollLeft=n}}function k(){var t=J.tasks.reduce(function(t,n){return n._start.isSameOrBefore(t._start)?n:t});return t._start}function C(t){var n=t.reduce(function(t,n){return n._end.isSameOrAfter(t._end)?n:t});return n.end}function B(){$(),M(),E(),j(),S()}function $(){var t=J.dates.length*J.config.column_width+J.config.left_menu_width,n=J.config.header_height+J.config.padding+(J.config.bar.height+J.config.padding)*J._projects._rows+400;J.canvas.rect(0,0,t,n).addClass("grid-background").appendTo(J.element_groups.grid),J.canvas.attr({height:n+J.config.padding,width:"110%"})}function M(){var t=J.dates.length*J.config.column_width,n=J.config.header_height+10;J.canvas.rect(J.config.left_menu_width,0,t,n).addClass("grid-header").appendTo(J.element_groups.grid)}function E(){var t=J.canvas.group().appendTo(J.element_groups.grid),n=J.canvas.group().appendTo(J.element_groups.grid),e=J.dates.length*J.config.column_width,r=J.config.bar.height+J.config.padding,a=J.config.left_menu_width,o=J.config.header_height+J.config.padding/2;J.tasks.forEach(function(i,d){var s=J.tasks[d+1];!i._index||s&&i._line===s._line||(J.canvas.rect(a,o,e,r).addClass("grid-row").appendTo(t),J.canvas.line(a,o+r,e+a,o+r).addClass("row-line").appendTo(n),o+=J.config.bar.height+J.config.padding)})}function D(){var t=J.canvas.group().appendTo(J.element_groups.project),n=J.canvas.group().appendTo(J.element_groups.project),e=J.canvas.group().appendTo(J.element_groups.project),r=J.canvas.group().appendTo(J.element_groups.project),a=J.dates.length*J.config.column_width,o=J.config.bar.height+J.config.padding,i=J.config.left_menu_width,d=J.config.header_height+J.config.padding/2,s=d;J._projects.forEach(function(c){var l=o*c._rows,f=c._late>0?"-late":"";if(s=d+o*c._firstRow,J.config.left_menu_width>0&&(J.canvas.rect(0,s,i,l).addClass("grid-project-row").appendTo(t),J.canvas.line(0,s+l,a+i,s+l).addClass("row-line-project").appendTo(n),J.canvas.text(J.config.left_menu_width/2,s+l/2,c.name).addClass("project-text").appendTo(e)),I("Month")&&c._currentDate){var g=c._currentDate.startOf("day").diff(J.gantt_start,"days")*J.config.column_width/30+J.config.left_menu_width;J.canvas.path(Snap.format("M {x} {y} v {height}",{x:g,y:s,height:l})).addClass("tick-current"+f).appendTo(r)}else if(I("Day")&&c._currentDate){var u=c._currentDate.clone().startOf("day").diff(J.gantt_start,"hours")/J.config.step*J.config.column_width+J.config.left_menu_width,p=J.config.column_width;J.canvas.rect(u,s,p,l).addClass("current-highlight"+f).appendTo(r)}})}function j(){var t=J.config.left_menu_width,n=(J.config.bar.height+J.config.padding)*J._projects._rows,e=!0,r=!1,a=void 0;try{for(var o,i=J.dates[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var d=o.value,s=J.config.header_height+J.config.padding/2,c="tick";I("Day")&&1===d.day()&&(c+=" thick"),I("Week")&&d.date()>=1&&d.date()<8&&(c+=" thick"),I("Month")&&0===d.month()&&(c+=" thick",s/=2),J.canvas.path(Snap.format("M {x} {y} v {height}",{x:t,y:s,height:n})).addClass(c).appendTo(J.element_groups.grid),t+=I("Month")?d.daysInMonth()*J.config.column_width/30:J.config.column_width}}catch(l){r=!0,a=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(r)throw a}}}function S(){var t=0,n=J.config.header_height+J.config.padding/2,e=(J.config.bar.height+J.config.padding)*J._projects._rows+n;if(I("Day")){var r=moment().startOf("day").diff(J.gantt_start,"hours")/J.config.step*J.config.column_width+J.config.left_menu_width,a=J.config.column_width;r<=J.element_groups.grid.getBBox().width&&r>=J.config.left_menu_width&&J.canvas.rect(r,t,a,e).addClass("today-highlight").appendTo(J.element_groups.grid)}else{var o=moment().startOf("day").diff(J.gantt_start,"days")*J.config.column_width/30+J.config.left_menu_width;o<=J.element_groups.grid.getBBox().width&&o>=J.config.left_menu_width&&J.canvas.path(Snap.format("M {x} {y} v {height}",{x:o,y:n,height:e-n})).addClass("tick-today").appendTo(J.element_groups.grid)}}function Y(){var t=!0,n=!1,e=void 0;try{for(var r,a=T()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,i=J.element_groups.grid.getBBox().width;if(o.lower_x+=J.config.left_menu_width,o.upper_x+=J.config.left_menu_width,J.canvas.text(o.lower_x,o.lower_y,o.lower_text).addClass("lower-text").appendTo(J.element_groups.date),o.upper_text){var d=J.canvas.text(o.upper_x,o.upper_y,o.upper_text).addClass("upper-text").appendTo(J.element_groups.date);o.lower_x+=(i-o.lower_x)/2,d.getBBox().x2>i&&(J.canvas.text(o.lower_x,o.upper_y,o.upper_text).addClass("upper-text").appendTo(J.element_groups.date),d.remove())}}}catch(s){n=!0,e=s}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw e}}}function T(){var t=0,n=null,e=J.dates.map(function(e,r){var a=W(e,n,r);return n=e,a.lower_x=t+J.config.column_width/2,t+=e.daysInMonth()*J.config.column_width/30,a});return e}function W(t,n,e){n||(n=t.clone().add(1,"year").add(1,"month").add(1,"day"));var r=60,a={"Quarter Day_lower":t.format("HH"),"Half Day_lower":t.format("HH"),Day_lower:t.date()!==n.date()?t.format("D"):"",Week_lower:t.month()!==n.month()?t.format("D MMM"):t.format("D"),Month_lower:t.format(J.config.column_width<r?"MM":"MMMM"),"Quarter Day_upper":t.date()!==n.date()?t.format("D MMM"):"","Half Day_upper":t.date()!==n.date()?t.month()!==n.month()?t.format("D MMM"):t.format("D"):"",Day_upper:t.month()!==n.month()?t.format("MMMM"):"",Week_upper:t.month()!==n.month()?t.format("MMMM"):"",Month_upper:t.year()!==n.year()?t.format("YYYY"):""},o={x:e*J.config.column_width,lower_y:J.config.header_height,upper_y:J.config.header_height-25},i={"Quarter Day_lower":4*J.config.column_width/2,"Quarter Day_upper":0,"Half Day_lower":2*J.config.column_width/2,"Half Day_upper":0,Day_lower:J.config.column_width/2,Day_upper:30*J.config.column_width/2,Week_lower:0,Week_upper:4*J.config.column_width/2,Month_upper:J.config.column_width*(12-t.month())/2};return{upper_text:a[J.config.view_mode+"_upper"],lower_text:a[J.config.view_mode+"_lower"],upper_x:o.x+i[J.config.view_mode+"_upper"],upper_y:o.upper_y,lower_y:o.lower_y}}function U(t){var n=(t._end.diff(t._start,"hours")+24)/J.config.step;return t._start.clone().add(n*t.progress/100,"days")}function O(){J._arrows=[];var t=!0,n=!1,e=void 0;try{for(var r,a=function(){var t=r.value,n=[];n=t.dependencies.map(function(n){var e=G(n);if(e){var r=(0,s["default"])(J,J._bars[e._index],J._bars[t._index]);return J.element_groups.arrow.add(r.element),r}}).filter(function(t){return t}),J._arrows=J._arrows.concat(n)},o=J.tasks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)a()}catch(i){n=!0,e=i}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw e}}}function X(){J._bars=J.tasks.map(function(t,n){var e=(0,i["default"])(J,t);return J.element_groups.bar.add(e.group),e})}function H(){var t=!0,n=!1,e=void 0;try{for(var r,a=function(){var t=r.value;t.arrows=J._arrows.filter(function(n){return n.from_task.task.id===t.task.id||n.to_task.task.id===t.task.id})},o=J._bars[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)a()}catch(i){n=!0,e=i}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw e}}}function R(){J.element_groups.grid.click(function(){L(),J.element_groups.details.selectAll(".details-wrapper").forEach(function(t){return t.addClass("hide")})})}function L(){J.canvas.selectAll(".bar-wrapper").forEach(function(t){t.removeClass("active")})}function I(t){if("string"==typeof t)return J.config.view_mode===t;if(Array.isArray(t)){var n=!0,e=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var i=a.value;if(J.config.view_mode===i)return!0}}catch(d){e=!0,r=d}finally{try{!n&&o["return"]&&o["return"]()}finally{if(e)throw r}}return!1}}function G(t){return J.tasks.find(function(n){return n.id===t})}function z(t){return J._bars.find(function(n){return n.task.id===t})}function q(t){return t.name+"_"+Math.random().toString(36).slice(2,12)}function F(t,n){J.config["on_"+t]&&J.config["on_"+t].apply(null,n)}var J={};return r(),J}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a,e(1);var o=e(5),i=r(o),d=e(6),s=r(d);t.exports=n["default"]},function(t,n,e){var r=e(2);"string"==typeof r&&(r=[[t.id,r,""]]);e(4)(r,{});r.locals&&(t.exports=r.locals)},function(t,n,e){n=t.exports=e(3)(),n.push([t.id,".gantt .grid-background{fill:none}.gantt .grid-header{fill:#fff;stroke:#e0e0e0;stroke-width:1.4}.gantt .grid-row{fill:#fff}.gantt .grid-row:nth-child(2n){fill:#f5f5f5}.gantt .row-line{stroke:#ebeff2}.gantt .row-line-project{stroke:#e0e0e0;stroke-width:1.4}.gantt .tick{stroke:#e0e0e0;stroke-width:.3}.gantt .tick.thick{stroke-width:.4}.gantt .tick-current,.gantt .tick-current-late,.gantt .tick-today{stroke-width:1;opacity:.8;stroke-dasharray:7}.gantt .tick-today{stroke:#2ec12e}.gantt .tick-current{stroke:#82b1f3}.gantt .tick-current-late{stroke:#f1aa9e}.gantt .current-highlight,.gantt .current-highlight-late,.gantt .today-highlight{opacity:.5}.gantt .today-highlight{fill:#b9f3b9}.gantt .current-highlight{fill:#82b1f3}.gantt .current-highlight-late{fill:#f1aa9e}.gantt #arrow{fill:none;stroke:#666;stroke-width:1.4}.gantt .bar{fill:#485f7d;stroke:#8d99a6;stroke-width:0;transition:stroke-width .3s ease}.gantt .bar-progress{fill:#b8c2cc}.gantt .bar-invalid{fill:transparent;stroke:#8d99a6;stroke-width:1;stroke-dasharray:5}.gantt .bar-invalid~.bar-label{fill:#555}.gantt .bar-label{fill:#fff;dominant-baseline:central;text-anchor:middle;font-size:12px;font-weight:lighter;letter-spacing:.8px}.gantt .bar-label.big{fill:#555;text-anchor:start}.gantt .handle{fill:#ddd;cursor:ew-resize;opacity:0;visibility:hidden;transition:opacity .3s ease}.gantt .bar-wrapper{cursor:pointer}.gantt .bar-wrapper:hover .bar{stroke-width:2}.gantt .bar-wrapper:hover .handle{visibility:visible;opacity:1}.gantt .bar-wrapper.active .bar{stroke-width:2}.gantt .lower-text,.gantt .upper-text{font-size:12px;text-anchor:middle}.gantt .upper-text{fill:#555}.gantt .lower-text{fill:#333}.gantt .project-text{fill:#555;text-anchor:middle}.gantt #details .details-container{background:#fff;display:inline-block;padding:12px}.gantt #details .details-container h5,.gantt #details .details-container p{margin:0}.gantt #details .details-container h5{font-size:12px;font-weight:700;margin-bottom:10px;color:#555}.gantt #details .details-container p{font-size:12px;margin-bottom:6px;color:#666}.gantt #details .details-container p:last-child{margin-bottom:0}.gantt .hide{display:none}.gantt .grid-project-row{fill:#f5f5f5}.gantt .avatarContainer{height:64px;display:flex;align-items:center;padding-right:10px;float:left}.gantt .avatar{height:50px!important}","",{version:3,sources:["/home/f4103757/workspace/gantt/src/src/gantt.scss"],names:[],mappings:"AAmBA,wBAGE,SAAU,CAHZ,oBAME,UACA,eACA,gBAAiB,CARnB,iBAWE,SAAa,CAXf,+BAcE,YA7BgB,CAelB,iBAiBE,cA/B0B,CAc5B,yBAoBE,eACA,gBAAiB,CArBnB,aAwBE,eACA,eAAiB,CAzBnB,mBA2BG,eAAiB,CA3BpB,kEAgCE,eACA,WACA,kBAAmB,CAlCrB,mBAsCE,cA1Ca,CAIf,qBA0CE,cAjDkB,CAOpB,0BA8CE,cApDiB,CAMnB,iFAkDE,UAAY,CAlDd,wBAsDE,YAzDmB,CAGrB,0BA0DE,YAjEkB,CAOpB,+BA8DE,YApEiB,CAMnB,cAkEE,UACA,YACA,gBAAiB,CApEnB,YAwEE,aACA,eACA,eACA,gCAAiC,CA3EnC,qBA8EE,YAvFY,CASd,oBAiFE,iBACA,eACA,eACA,kBAAmB,CApFrB,+BAuFG,SAlGc,CAWjB,kBA2FE,UACA,0BACA,mBACA,eACA,oBACA,mBAAqB,CAhGvB,sBAmGG,UACA,iBAAkB,CApGrB,eAyGE,UACA,iBACA,UACA,kBACA,2BAA4B,CA7G9B,oBAiHE,cAAe,CAjHjB,+BAqHI,cAAe,CArHnB,kCAyHI,mBACA,SAAU,CA1Hd,gCAgII,cAAe,CAhInB,sCAsIE,eACA,kBAAmB,CAvIrB,mBA0IE,SArJe,CAWjB,mBA6IE,SAvJe,CAUjB,qBAgJE,UACA,kBAAmB,CAjJrB,mCAqJE,gBACA,qBACA,YAAa,CAvJf,2EA0JG,QAAS,CA1JZ,sCA8JG,eACA,gBACA,mBACA,UA5Kc,CAWjB,qCAqKG,eACA,kBACA,UAnLc,CAYjB,gDA2KG,eAAgB,CA3KnB,aAgLE,YAAa,CAhLf,yBAoLE,YAnMgB,CAelB,wBAwLE,YACA,aACA,mBACA,mBACA,UAAW,CA5Lb,eAgME,qBAAuB,CACvB",file:"gantt.scss",sourcesContent:["// $bar-color: #b8c2cc;\n$bar-color: #485f7d;\n$bar-stroke: #8D99A6;\n$border-color: #e0e0e0;\n$light-bg: #f5f5f5;\n$light-border-color: #ebeff2;\n$handle-color: #ddd;\n$text-muted: #666;\n$text-light: #555;\n$text-color: #333;\n$grey: #b8c2cc;\n$blue: #3887f3;\n$light-blue: #82b1f3;\n$light-red: #f1aa9e;\n$light-yellow: #fcf8e3;\n$green: #2ec12e;\n$light-green: #b9f3b9;\n\n\n.gantt {\n\n\t.grid-background {\n\t\tfill: none;\n\t}\n\t.grid-header {\n\t\tfill: #ffffff;\n\t\tstroke: $border-color;\n\t\tstroke-width: 1.4;\n\t}\n\t.grid-row {\n\t\tfill: #ffffff;\n\t}\n\t.grid-row:nth-child(even) {\n\t\tfill: $light-bg;\n\t}\n\t.row-line {\n\t\tstroke: $light-border-color;\t\t\n\t}\n\t.row-line-project {\t\t\n\t\tstroke: $border-color;\t\t\n\t\tstroke-width: 1.4;\n\t}\n\t.tick {\n\t\tstroke: $border-color;\n\t\tstroke-width: 0.3;\n\t\t&.thick {\n\t\t\tstroke-width: 0.4;\n\t\t}\n\t}\n\n\t.tick-today, .tick-current, .tick-current-late {\t\t\n\t\tstroke-width: 1;\t\n\t\topacity: 0.8;\t\n\t\tstroke-dasharray: 7;\n\t}\n\n\t.tick-today {\n\t\tstroke: $green;\t\t\n\t}\n\n\t.tick-current {\n\t\tstroke: $light-blue;\n\t\t\n\t}\n\t.tick-current-late {\n\t\tstroke: $light-red;\n\t}\n\n\t.today-highlight, .current-highlight, .current-highlight-late{\n\t\topacity: 0.5;\n\t}\n\n\t.today-highlight {\n\t\tfill: $light-green;\t\t\n\t}\n\n\t.current-highlight {\n\t\tfill: $light-blue;\n\t}\n\n\t.current-highlight-late {\n\t\tfill: $light-red;\n\t}\n\n\t#arrow {\n\t\tfill: none;\n\t\tstroke: $text-muted;\n\t\tstroke-width: 1.4;\n\t}\n\n\t.bar {\n\t\tfill: $bar-color;\n\t\tstroke: $bar-stroke;\n\t\tstroke-width: 0;\n\t\ttransition: stroke-width .3s ease;\n\t}\n\t.bar-progress {\n\t\tfill: $grey;\n\t}\n\t.bar-invalid {\n\t\tfill: transparent;\n\t\tstroke: $bar-stroke;\n\t\tstroke-width: 1;\n\t\tstroke-dasharray: 5;\n\n\t\t&~.bar-label {\n\t\t\tfill: $text-light;\n\t\t}\n\t}\n\t.bar-label {\n\t\tfill: #fff;\n\t\tdominant-baseline: central;\n\t\ttext-anchor: middle;\n\t\tfont-size: 12px;\n\t\tfont-weight: lighter;\n\t\tletter-spacing: 0.8px;\n\n\t\t&.big {\n\t\t\tfill: $text-light;\n\t\t\ttext-anchor: start;\n\t\t}\n\t}\n\n\t.handle {\n\t\tfill: $handle-color;\n\t\tcursor: ew-resize;\n\t\topacity: 0;\n\t\tvisibility: hidden;\n\t\ttransition: opacity .3s ease;\n\t}\n\n\t.bar-wrapper {\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\t.bar {\n\t\t\t\tstroke-width: 2;\n\t\t\t}\n\n\t\t\t.handle {\n\t\t\t\tvisibility: visible;\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\n\t\t&.active {\n\t\t\t.bar {\n\t\t\t\tstroke-width: 2;\n\t\t\t}\n\t\t}\n\t}\n\n\t.lower-text, .upper-text {\n\t\tfont-size: 12px;\n\t\ttext-anchor: middle;\n\t}\n\t.upper-text {\n\t\tfill: $text-light;\n\t}\n\t.lower-text {\n\t\tfill: $text-color;\n\t}\n\t.project-text{\n\t\tfill: $text-light;\n\t\ttext-anchor: middle;\n\t}\n\n\t#details .details-container {\n\t\tbackground: #fff;\n\t\tdisplay: inline-block;\n\t\tpadding: 12px;\n\n\t\th5, p {\n\t\t\tmargin: 0;\n\t\t}\n\n\t\th5 {\n\t\t\tfont-size: 12px;\n\t\t\tfont-weight: bold;\n\t\t\tmargin-bottom: 10px;\n\t\t\tcolor: $text-light;\n\t\t}\n\n\t\tp {\n\t\t\tfont-size: 12px;\n\t\t\tmargin-bottom: 6px;\n\t\t\tcolor: $text-muted;\n\t\t}\n\n\t\tp:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\n\t.hide {\n\t\tdisplay: none;\n\t}\n\n\t.grid-project-row {\n\t\tfill: $light-bg;\n\t}\n\n\t.avatarContainer{\n\t\theight: 64px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding-right: 10px;\n\t\tfloat: left;\n\t\t\n\t}\n\t.avatar{\n\t\theight: 50px !important;\n\t}\t\n\t\n}"],sourceRoot:""}])},function(t,n){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],n=0;n<this.length;n++){var e=this[n];e[2]?t.push("@media "+e[2]+"{"+e[1]+"}"):t.push(e[1])}return t.join("")},t.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(r[o]=!0)}for(a=0;a<n.length;a++){var i=n[a];"number"==typeof i[0]&&r[i[0]]||(e&&!i[2]?i[2]=e:e&&(i[2]="("+i[2]+") and ("+e+")"),t.push(i))}},t}},function(t,n,e){function r(t,n){for(var e=0;e<t.length;e++){var r=t[e],a=u[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(c(r.parts[o],n))}else{for(var i=[],o=0;o<r.parts.length;o++)i.push(c(r.parts[o],n));u[r.id]={id:r.id,refs:1,parts:i}}}}function a(t){for(var n=[],e={},r=0;r<t.length;r++){var a=t[r],o=a[0],i=a[1],d=a[2],s=a[3],c={css:i,media:d,sourceMap:s};e[o]?e[o].parts.push(c):n.push(e[o]={id:o,parts:[c]})}return n}function o(t,n){var e=_(),r=w[w.length-1];if("top"===t.insertAt)r?r.nextSibling?e.insertBefore(n,r.nextSibling):e.appendChild(n):e.insertBefore(n,e.firstChild),w.push(n);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");e.appendChild(n)}}function i(t){t.parentNode.removeChild(t);var n=w.indexOf(t);n>=0&&w.splice(n,1)}function d(t){var n=document.createElement("style");return n.type="text/css",o(t,n),n}function s(t){var n=document.createElement("link");return n.rel="stylesheet",o(t,n),n}function c(t,n){var e,r,a;if(n.singleton){var o=m++;e=v||(v=d(n)),r=l.bind(null,e,o,!1),a=l.bind(null,e,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=s(n),r=g.bind(null,e),a=function(){i(e),e.href&&URL.revokeObjectURL(e.href)}):(e=d(n),r=f.bind(null,e),a=function(){i(e)});return r(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;r(t=n)}else a()}}function l(t,n,e,r){var a=e?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(n,a);else{var o=document.createTextNode(a),i=t.childNodes;i[n]&&t.removeChild(i[n]),i.length?t.insertBefore(o,i[n]):t.appendChild(o)}}function f(t,n){var e=n.css,r=n.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}function g(t,n){var e=n.css,r=n.sourceMap;r&&(e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([e],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var u={},p=function(t){var n;return function(){return"undefined"==typeof n&&(n=t.apply(this,arguments)),n}},h=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),_=p(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,m=0,w=[];t.exports=function(t,n){n=n||{},"undefined"==typeof n.singleton&&(n.singleton=h()),"undefined"==typeof n.insertAt&&(n.insertAt="bottom");var e=a(t);return r(e,n),function(t){for(var o=[],i=0;i<e.length;i++){var d=e[i],s=u[d.id];s.refs--,o.push(s)}if(t){var c=a(t);r(c,n)}for(var i=0;i<o.length;i++){var s=o[i];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete u[s.id]}}}};var y=function(){var t=[];return function(n,e){return t[n]=e,t.filter(Boolean).join("\n")}}()},function(t,n,e){"use strict";function r(t,n){function e(){r(),a(),d(),u()}function r(){J.action_completed=!1,J.task=n}function a(){o(),i()}function o(){J.invalid=J.task.invalid,J.height=t.config.bar.height,J.x=O(),J.y=X(),J.corner_radius=3,J.duration=(J.task._end.diff(J.task._start,"hours")+24)/t.config.step,J.durationDays=J.task._end.diff(J.task._start,"days")+1,J.width=t.config.column_width*J.duration,J.progress_width=t.config.column_width*J.duration*(J.task.progress/100)||0,J.group=t.canvas.group().addClass("bar-wrapper").addClass(J.task.custom_class||""),J.bar_group=t.canvas.group().addClass("bar-group").appendTo(J.group),J.handle_group=t.canvas.group().addClass("handle-group").appendTo(J.group)}function i(){Snap.plugin(function(t,n,e,r,a){n.prototype.getX=function(){return+this.attr("x")},n.prototype.getY=function(){return+this.attr("y")},n.prototype.getWidth=function(){return+this.attr("width")},n.prototype.getHeight=function(){return+this.attr("height")},n.prototype.getEndX=function(){return this.getX()+this.getWidth()}})}function d(){s(),c(),l(),f()}function s(){J.$bar=t.canvas.rect(J.x,J.y,J.width,J.height,J.corner_radius,J.corner_radius).addClass("bar").appendTo(J.bar_group),J.invalid&&J.$bar.addClass("bar-invalid")}function c(){J.invalid||(J.$bar_progress=t.canvas.rect(J.x,J.y,J.progress_width,J.height,J.corner_radius,J.corner_radius).addClass("bar-progress").appendTo(J.bar_group))}function l(){t.canvas.text(J.x+J.width/2,J.y+J.height/2,J.task.name).addClass("bar-label").appendTo(J.bar_group),I()}function f(){if(!J.invalid){var n=J.$bar,e=8;t.canvas.rect(n.getX()+n.getWidth()-9,n.getY()+1,e,J.height-2,J.corner_radius,J.corner_radius).addClass("handle right").appendTo(J.handle_group),t.canvas.rect(n.getX()+1,n.getY()+1,e,J.height-2,J.corner_radius,J.corner_radius).addClass("handle left").appendTo(J.handle_group),J.task.progress&&J.task.progress<100&&t.canvas.polygon(g()).addClass("handle progress").appendTo(J.handle_group)}}function g(){var t=J.$bar_progress;return[t.getEndX()-5,t.getY()+t.getHeight(),t.getEndX()+5,t.getY()+t.getHeight(),t.getEndX(),t.getY()+t.getHeight()-8.66]}function u(){J.invalid||(j(),p(),m(),y(),A())}function p(){var n=t.element_groups.details;if(J.details_box=n.select(".details-wrapper[data-task='"+J.task.id+"']"),!J.details_box){J.details_box=t.canvas.group().addClass("details-wrapper hide").attr("data-task",J.task.id).appendTo(n),h();var e=t.canvas.filter(Snap.filter.shadow(0,1,1,"#666",.6));J.details_box.attr({filter:e})}J.group.click(function(t){J.action_completed||(n.selectAll(".details-wrapper").forEach(function(t){return t.addClass("hide")}),J.details_box.removeClass("hide"))})}function h(){var t=v(),n=t.x,e=t.y;J.details_box.transform("t"+n+","+e),J.details_box.clear();var r=_(),a=Snap.parse('<foreignObject width="5000" height="2000">\n\t\t\t\t<body xmlns="http://www.w3.org/1999/xhtml">\n\t\t\t\t\t'+r+"\n\t\t\t\t</body>\n\t\t\t\t</foreignObject>");J.details_box.append(a)}function _(){if(t.config.custom_popup_html){var e=t.config.custom_popup_html;if("string"==typeof e)return e;if(F(e))return e(n)}var r=""+J.task.name,a="Duração: "+J.durationDays+" dias",o=J.task.progress?"Percentual: "+J.task.progress+"%":null,i="";J.task.periodos.forEach(function(t){var n=t.tipo.nome,e=moment(t.dataInicio).format("DD/MM/YYYY"),r=moment(t.dataFim).format("DD/MM/YYYY");i=i.concat("\n\t\t\t\t<p>"+n+": "+e+" - "+r+"</p>\n\t\t\t\t")});var d="";J.task.responsaveis.forEach(function(t,n){var e=t.responsavel.chave,r=t.responsavel.nome,a=t.responsavel.telefone,o=t.responsavel.celular,i="https://connections.bb.com.br/profiles/html/myProfileView.do?uid="+e;d=d.concat("\n\t\t\t\t"+(0!==n?"<hr />":"")+"\n\t\t\t\t<a href="+i+' target="_blank" class="avatarContainer">\n\t\t\t\t\t<img src=https://connections.bb.com.br/profiles/photo.do?uid='+e+' class="avatar" />\n\t\t\t\t</a>\n\t\t\t\t<p>'+e+" - "+r+"</p>\n\t\t\t\t<p>Ramal: "+a+"</p>\n\t\t\t\t<p>Celular: "+o+"</p>\n\t\t\t\t")});var s="";J.task.uors.forEach(function(t){var n=t.uor.nomeReduzido;s=s.concat('\n\t\t\t\t<a href="https://humanograma.intranet.bb.com.br/uor/'+t.uor_id+'" target="_blank">\n\t\t\t\t\t<p>'+n+"</p>\n\t\t\t\t</a>\n\t\t\t\t")});var c='\n\t\t\t<div class="details-container">\n\t\t\t\t<h5>'+r+"</h5>\n\t\t\t\t<p>"+a+"</p>\n\t\t\t\t"+(o?"<p>"+o+"</p>":"")+"\n\t\t\t\t"+(i?"\n\t\t\t\t\t<br />\n\t\t\t\t\t<h5>Datas:</h5>\n\t\t\t\t\t"+i+"\n\t\t\t\t\t":"")+"\n\t\t\t\t"+(s?"\n\t\t\t\t\t<br />\n\t\t\t\t\t<h5>Área(s):</h5>\n\t\t\t\t\t"+s+"\n\t\t\t\t\t":"")+"\n\t\t\t\t"+(d?"\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<h5>Contato(s):</h5>\n\t\t\t\t\t\t"+d+"\n\t\t\t\t\t\t":"")+"\n\t\t\t</div>\n\t\t";return c}function v(){return{x:J.$bar.getEndX()+2,y:J.$bar.getY()-10}}function m(){function t(t,n){M(t,n)}function n(){E()}function e(t,n){C(t,n)}function r(){B()}var a=w(),o=a.left,i=a.right;o.drag(e,b,r),i.drag(t,b,n)}function w(){return{left:J.handle_group.select(".handle.left"),right:J.handle_group.select(".handle.right")}}function y(){J.bar_group.drag(x,b,k)}function A(){function t(t,n){t>a.max_dx&&(t=a.max_dx),t<a.min_dx&&(t=a.min_dx),a.attr("width",a.owidth+t),o.attr("points",g()),a.finaldx=t}function n(){a.finaldx&&(Y(),T())}function e(){a.finaldx=0,a.owidth=a.getWidth(),a.min_dx=-a.getWidth(),a.max_dx=r.getWidth()-a.getWidth()}var r=J.$bar,a=J.$bar_progress,o=J.group.select(".handle.progress");o&&o.drag(t,e,n)}function b(){var t=J.$bar;t.ox=t.getX(),t.oy=t.getY(),t.owidth=t.getWidth(),t.finaldx=0,$("onstart")}function x(t,n){var e=J.$bar;e.finaldx=H(t),D({x:e.ox+e.finaldx}),$("onmove",[t,n])}function k(){var t=J.$bar;t.finaldx&&(S(),T(),$("onstop"))}function C(t,n){var e=J.$bar;e.finaldx=H(t),D({x:e.ox+e.finaldx,width:e.owidth-e.finaldx}),$("onmove",[t,n])}function B(){var t=J.$bar;t.finaldx&&S(),T(),$("onstop")}function $(n,e){var r=t.dependency_map;if(r[J.task.id]){var a=!0,o=!1,i=void 0;try{for(var d,s=r[J.task.id][Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var c=d.value,l=t.get_bar(c);l[n].apply(l,e)}}catch(f){o=!0,i=f}finally{try{!a&&s["return"]&&s["return"]()}finally{if(o)throw i}}}}function M(t,n){var e=J.$bar;e.finaldx=H(t),D({width:e.owidth+e.finaldx})}function E(){var t=J.$bar;t.finaldx&&S(),T()}function D(e){var r=e.x,a=void 0===r?null:r,o=e.width,i=void 0===o?null:o,d=J.$bar;if(a){var s=n.dependencies.map(function(n){return t.get_bar(n).$bar.getX()}),c=s.reduce(function(t,n){return a>=n},a);if(!c)return void(i=null);R(d,"x",a)}i&&i>=t.config.column_width&&R(d,"width",i),I(),G(),L(),z(),q()}function j(){J.group.click(function(){J.action_completed||(J.group.hasClass("active")&&t.trigger_event("click",[J.task]),t.unselect_all(),J.group.toggleClass("active"))})}function S(){var n=W(),e=n.new_start_date,r=n.new_end_date;J.task._start=e,J.task._end=r,h(),t.trigger_event("date_change",[J.task,e,r])}function Y(){var n=U();J.task.progress=n,h(),t.trigger_event("progress_change",[J.task,n])}function T(){J.action_completed=!0,setTimeout(function(){return J.action_completed=!1},2e3)}function W(){var n=J.$bar,e=n.getX()/t.config.column_width,r=t.gantt_start.clone().add(e*t.config.step,"hours"),a=n.getWidth()/t.config.column_width,o=r.clone().add(a*t.config.step,"hours");return o.add("-1","seconds"),{new_start_date:r,new_end_date:o}}function U(){var t=J.$bar_progress.getWidth()/J.$bar.getWidth()*100;return parseInt(t,10)}function O(){var n=J.task._start.diff(t.gantt_start,"hours")/t.config.step*t.config.column_width;return t.view_is("Month")&&(n=J.task._start.diff(t.gantt_start,"days")*t.config.column_width/30),n+t.config.left_menu_width}function X(){return t.config.header_height+t.config.padding+J.task._line*(J.height+t.config.padding)}function H(n){var e=n,r=void 0,a=void 0;return t.view_is("Week")?(r=n%(t.config.column_width/7),a=e-r+(r<t.config.column_width/14?0:t.config.column_width/7)):t.view_is("Month")?(r=n%(t.config.column_width/30),a=e-r+(r<t.config.column_width/60?0:t.config.column_width/30)):(r=n%t.config.column_width,a=e-r+(r<t.config.column_width/2?0:t.config.column_width)),
a}function R(t,n,e){return e=+e,isNaN(e)||t.attr(n,e),t}function L(){J.$bar_progress.attr("x",J.$bar.getX()),J.$bar_progress.attr("width",J.$bar.getWidth()*(J.task.progress/100))}function I(){var t=J.$bar,n=J.group.select(".bar-label");n.getBBox().width>t.getWidth()?n.addClass("big").attr("x",t.getX()+t.getWidth()+5):n.removeClass("big").attr("x",t.getX()+t.getWidth()/2)}function G(){var t=J.$bar;J.handle_group.select(".handle.left").attr({x:t.getX()+1}),J.handle_group.select(".handle.right").attr({x:t.getEndX()-9});var n=J.group.select(".handle.progress");n&&n.attr("points",g())}function z(){var t=!0,n=!1,e=void 0;try{for(var r,a=J.arrows[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.update()}}catch(i){n=!0,e=i}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw e}}}function q(){var t=v(),n=t.x,e=t.y;J.details_box&&J.details_box.transform("t"+n+","+e)}function F(t){var n={};return t&&"[object Function]"===n.toString.call(t)}var J={};return J.onstart=b,J.onmove=x,J.onstop=k,J.onmove_handle_left=C,J.onstop_handle_left=B,e(),J}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r,e(1),t.exports=n["default"]},function(t,n){"use strict";function e(t,n,e){function r(){d.from_task=n,d.to_task=e,a(),o()}function a(){d.start_x=n.$bar.getX()+n.$bar.getWidth()/2;for(var r=function(){return e.$bar.getX()<d.start_x+t.config.padding&&d.start_x>n.$bar.getX()+t.config.padding};r();)d.start_x-=10;d.start_y=t.config.header_height+t.config.bar.height+(t.config.padding+t.config.bar.height)*n.task._line+t.config.padding,d.end_x=e.$bar.getX()-t.config.padding/2,d.end_y=t.config.header_height+t.config.bar.height/2+(t.config.padding+t.config.bar.height)*e.task._line+t.config.padding;var a=n.task._line>e.task._line;d.curve=t.config.arrow.curve,d.clockwise=a?1:0,d.curve_y=a?-d.curve:d.curve,d.offset=a?d.end_y+t.config.arrow.curve:d.end_y-t.config.arrow.curve,d.path=Snap.format("M {start_x} {start_y} V {offset} a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} L {end_x} {end_y} m -5 -5 l 5 5 l -5 5",{start_x:d.start_x,start_y:d.start_y,end_x:d.end_x,end_y:d.end_y,offset:d.offset,curve:d.curve,clockwise:d.clockwise,curve_y:d.curve_y}),e.$bar.getX()<n.$bar.getX()+t.config.padding&&(d.path=Snap.format("M {start_x} {start_y} v {down_1} a {curve} {curve} 0 0 1 -{curve} {curve} H {left} a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} L {end_x} {end_y} m -5 -5 l 5 5 l -5 5",{start_x:d.start_x,start_y:d.start_y,end_x:d.end_x,end_y:d.end_y,down_1:t.config.padding/2-d.curve,down_2:e.$bar.getY()+e.$bar.getHeight()/2-d.curve_y,left:e.$bar.getX()-t.config.padding,offset:d.offset,curve:d.curve,clockwise:d.clockwise,curve_y:d.curve_y}))}function o(){d.element=t.canvas.path(d.path).attr("data-from",d.from_task.task.id).attr("data-to",d.to_task.task.id)}function i(){a(),d.element.attr("d",d.path)}var d={};return d.update=i,r(),d}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=e,t.exports=n["default"]}])});
//# sourceMappingURL=frappe-gantt.min.js.map